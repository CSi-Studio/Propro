<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorator="/layouts/layout">
    <!-- begin::Head -->
    <head>
        <title>欢迎登陆西湖大学Swath蛋白质组学分析平台</title>
        <link th:href="@{/assets/css/main.css}" rel="stylesheet" type="text/css"/>

    </head>
    <!-- end::Head -->
    <!-- end::Body -->
    <body>
        <div class="m-content" layout:fragment="content">

            <div class="alert alert-danger" role="alert" th:if="${error_msg}" th:text="${error_msg}"></div>
            <div class="alert alert-success" role="alert" th:if="${success_msg}" th:text="${success_msg}"></div>
            <div class="alert alert-success" role="alert" th:if="${searchResult}" th:text="${searchResult}"></div>

            <div class="m-portlet__body">
                <!--begin: Search Form -->
                <div class="clearfix">
                    <form id="searchForm" method="post" role="form"
                          class="m-form m-form--fit m-form--label-align-right m-form--group-seperator-dashed"
                          action="/transition/list">
                        <input id="currentPage" type="hidden" class="form-control" name="currentPage">
                        <input id="pageSize" type="hidden" th:value="${pageSize}" class="form-control" name="pageSize">

                        <div class="form-group m-form__group row">
                            <div class="input-group col-lg-3">
                                <div class="input-group-prepend">
                                    <button class="btn btn-success" type="button">
                                        库ID:
                                    </button>
                                </div>
                                <input type="text" class="form-control m-input" name="libraryId" placeholder="libraryId"
                                       th:value="${libraryId}">
                            </div>
                            <div class="input-group col-lg-3">
                                <div class="input-group-prepend">
                                    <button class="btn btn-success" type="button">
                                        蛋白质名称:
                                    </button>
                                </div>
                                <input type="text" class="form-control m-input" name="proteinName"
                                       placeholder="proteinName" th:value="${proteinName}">
                            </div>
                            <div class="input-group col-lg-3">
                                <div class="input-group-prepend">
                                    <button class="btn btn-success" type="button">
                                        肽段:
                                    </button>
                                </div>
                                <input type="text" class="form-control m-input" name="peptideSequence"
                                       placeholder="peptideSequence" th:value="${peptideSequence}">
                            </div>
                            <div class="input-group col-lg-3">
                                <div class="input-group-prepend">
                                    <button class="btn btn-success" type="button">
                                        Transition名称:
                                    </button>
                                </div>
                                <input type="text" class="form-control m-input" name="transitionName"
                                       placeholder="transitionName" th:value="${transitionName}">
                                <div class="input-group-append">
                                    <button class="btn btn-warning" type="submit">
                                        搜索
                                    </button>
                                </div>
                            </div>
                        </div>

                    </form>
                </div>
                <!--end: Search Form -->
                <!--begin: Datatable -->
                <div>
                    <table class="table table-bordered" style="table-layout:fixed;">
                        <thead>
                            <tr>
                                <th width="2%">
                                    No.
                                </th>
                                <th width="10%">
                                    对应标准库名称
                                </th>
                                <th width="13%">
                                    对应蛋白质名称
                                </th>
                                <th width="10%">
                                    对应肽段序列
                                </th>
                                <th width="15%">
                                    肽段全名(伪肽段则为原肽段全名)
                                </th>
                                <th width="5%">
                                    肽段荷质比
                                </th>
                                <th width="5%">
                                    本体荷质比
                                </th>
                                <th width="15%">
                                    Annotation
                                </th>
                                <th width="5%">
                                    是否是伪肽段
                                </th>
                                <th width="10%">
                                    离子强度
                                </th>
                                <th width="10%">
                                    归一化RT
                                </th>
                                <th width="10%">
                                    操作
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="transition,status:${transitionList}">
                                <td th:text="${status.index+1}"></td>
                                <td>
                                    <a th:href="|/library/detail/${transition.libraryId}|"
                                       th:text="${transition.libraryName}"></a>
                                </td>
                                <td>
                                    <a th:href="|/transition/list?proteinName=${transition.proteinName}|"
                                       th:text="${transition.proteinName}"></a>
                                </td>
                                <td>
                                    <a th:href="|/transition/list?peptideSequence=${transition.peptideSequence}|"
                                       th:text="${transition.peptideSequence}"></a>
                                </td>
                                <td th:text="${transition.fullUniModPeptideName}"></td>
                                <td th:text="${transition.precursorMz}"></td>
                                <td th:text="${transition.productMz}"></td>
                                <td th:text="${transition.annotation}"></td>
                                <td th:if="${transition.isDecoy}">
                                    <span class="m-badge m-badge--danger m-badge--wide">
                                        伪肽段
                                    </span>
                                </td>
                                <td th:if="${!transition.isDecoy}">
                                    <span class="m-badge m-badge--success m-badge--wide">
                                        真肽段
                                    </span>
                                </td>
                                <td th:text="${transition.productIonIntensity}"></td>
                                <td th:text="${transition.normalizedRetentionTime}"></td>
                                <td>
                                    <a th:href="|/transition/detail/${transition.id}|"
                                       class="btn btn-success btn-sm">详情
                                    </a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p id="pagination"></p>
                <!--end: Datatable -->
            </div>
        </div>
        <th:block layout:fragment="script">
            <script th:src="@{/assets/js/jquery-bootpag/jquery.bootpag.js}" type="text/javascript"></script>

            <script th:inline="javascript">
                /*<![CDATA[*/
                var totalPage = [[${totalPage}]];
                var currentPage = [[${currentPage}]];
                /*]]>*/

                $(document).ready(function () {
                    $('#pagination').bootpag({
                        paginationClass: 'pagination',
                        next: '<i class="fa fa-angle-right"></i>',
                        prev: '<i class="fa fa-angle-left"></i>',
                        total: totalPage,
                        page: currentPage,
                        maxVisible: 10
                    }).on("page", function (event, num) {
                        document.getElementById("currentPage").value = num;
                        document.getElementById("searchForm").submit();
                    });
                })
            </script>
        </th:block>

    </body>

    <!-- end::Body -->
</html>
