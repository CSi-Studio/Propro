<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorator="/layouts/layout">
    <!-- begin::Head -->
    <head>
        <title>欢迎登陆西湖大学PECS分析平台</title>
        <link th:href="@{/assets/css/pagination.css}" rel="stylesheet" type="text/css"/>

    </head>
    <!-- end::Head -->
    <!-- end::Body -->
    <body>
        <div class="m-content" layout:fragment="content">

            <div class="alert alert-danger" role="alert" th:if="${error_msg}" th:text="${error_msg}"></div>
            <div class="alert alert-success" role="alert" th:if="${success_msg}" th:text="${success_msg}"></div>
            <div class="alert alert-success" role="alert" th:if="${searchResult}" th:text="${searchResult}"></div>

            <div class="m-portlet__body">
                <!--begin: Search Form -->
                <div class="clearfix">
                    <form id="searchForm" method="post" role="form"
                          class="m-form m-form--fit m-form--label-align-right m-form--group-seperator-dashed"
                          action="/transition/list">
                        <input id="currentPage" type="hidden" class="form-control" name="currentPage">
                        <input id="pageSize" type="hidden" th:value="${pageSize}" class="form-control" name="pageSize">

                        <div class="form-group m-form__group row">
                            <div class="input-group col-lg-3">
                                <div class="input-group-prepend">
                                    <button class="btn btn-success" type="button">
                                        标准库:
                                    </button>
                                </div>
                                <select class="form-control m-input" id="libraryId" name="libraryId">
                                    <option th:each="library:${libraries}" th:value="${library.id}" th:text="${library.name}" th:selected="${libraryId}==${library.id}?true:false"></option>
                                </select>
                            </div>
                            <div class="input-group col-lg-3">
                                <div class="input-group-prepend">
                                    <button class="btn btn-success" type="button">
                                        蛋白质名称:
                                    </button>
                                </div>
                                <input type="text" class="form-control m-input" name="proteinName"
                                       placeholder="proteinName" th:value="${proteinName}">
                            </div>
                            <div class="input-group col-lg-3">
                                <div class="input-group-prepend">
                                    <button class="btn btn-success" type="button">
                                        肽段:
                                    </button>
                                </div>
                                <input type="text" class="form-control m-input" name="sequence"
                                       placeholder="sequence" th:value="${sequence}">
                            </div>
                            <div class="input-group col-lg-3">
                                <div class="input-group-prepend">
                                    <button class="btn btn-success" type="button">
                                        Transition名称:
                                    </button>
                                </div>
                                <input type="text" class="form-control m-input" name="name"
                                       placeholder="name" th:value="${name}">
                                <div class="input-group-append">
                                    <button class="btn btn-warning" type="submit">
                                        搜索
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <!--end: Search Form -->
                <!--begin: Datatable -->
                <div>
                    <table class="table table-bordered table-hover" style="table-layout:fixed;">
                        <thead>
                            <tr>
                                <th width="2%">
                                    No.
                                </th>
                                <th width="8%">
                                    对应标准库名称
                                </th>
                                <th width="10%">
                                    对应蛋白质名称
                                </th>
                                <th width="15%">
                                    名称
                                </th>
                                <th width="8%">
                                    原始肽段序列
                                </th>
                                <!--<th width="9%">-->
                                    <!--肽段序列-->
                                <!--</th>-->
                                <th width="14%">
                                    肽段全名
                                </th>
                                <th width="7%">
                                    肽段荷质比
                                </th>
                                <th width="7%">
                                    本体荷质比
                                </th>
                                <th width="15%">
                                    Annotations
                                </th>
                                <th width="5%">
                                    是否伪肽段
                                </th>
                                <th width="8%">
                                    离子强度
                                </th>
                                <th width="6%">
                                    归一化RT
                                </th>
                                <th width="5%">
                                    操作
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="transition,status:${transitionList}">
                                <td th:text="${status.index+1}"></td>
                                <td>
                                    <a th:href="|/library/detail/${transition.libraryId}|"
                                       th:text="${transition.libraryName}"></a>
                                </td>
                                <td>
                                    <a th:href="|/transition/list?proteinName=${transition.proteinName}|"
                                       th:text="${transition.proteinName}"></a>
                                </td>
                                <td th:text="${transition.name}"></td>
                                <!--<td>-->
                                    <!--<a th:href="|/transition/list?sequence=${transition.targetSequence}|"-->
                                       <!--th:text="${transition.targetSequence}"></a>-->
                                <!--</td>-->
                                <td>
                                    <a th:href="|/transition/list?sequence=${transition.sequence}|"
                                       th:text="${transition.sequence}"></a>
                                </td>
                                <td th:text="${transition.fullName}"></td>
                                <td th:text="${transition.precursorMz}"></td>
                                <td th:text="${transition.productMz}"></td>
                                <td th:text="${transition.annotations}"></td>
                                <td th:if="${transition.isDecoy}">
                                    <span class="m-badge m-badge--danger m-badge--wide">
                                        伪
                                    </span>
                                </td>
                                <td th:if="${!transition.isDecoy}">
                                    <span class="m-badge m-badge--success m-badge--wide">
                                        真
                                    </span>
                                </td>
                                <td th:text="${transition.intensity}"></td>
                                <td th:text="${transition.rt}"></td>
                                <td>
                                    <a th:href="|/transition/detail/${transition.id}|"
                                       class="btn btn-success btn-sm">详情
                                    </a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p id="pagination"></p>
                <!--end: Datatable -->
            </div>
        </div>
        <th:block layout:fragment="script">
            <script th:src="@{/assets/js/jquery-bootpag/jquery.bootpag.js}" type="text/javascript"></script>

            <script th:inline="javascript">
                /*<![CDATA[*/
                var totalPage = [[${totalPage}]];
                var currentPage = [[${currentPage}]];
                /*]]>*/

                $(document).ready(function () {
                    $('#pagination').bootpag({
                        paginationClass: 'pagination',
                        next: '<i class="fa fa-angle-right"></i>',
                        prev: '<i class="fa fa-angle-left"></i>',
                        total: totalPage,
                        page: currentPage,
                        maxVisible: 20
                    }).on("page", function (event, num) {
                        document.getElementById("currentPage").value = num;
                        document.getElementById("searchForm").submit();
                    });
                })
            </script>
        </th:block>

    </body>

    <!-- end::Body -->
</html>
