<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorator="/layouts/layout">
<!-- begin::Head -->
<head>
    <title>
        欢迎登陆西湖大学PECS分析平台
    </title>
    <link th:href="|${url}/assets/css/pagination.css|" rel="stylesheet" type="text/css"/>

</head>
<!-- end::Head -->
<!-- end::Body -->
<body>

<div class="m-subheader ">
    <div class="d-flex align-items-center">
        <div class="mr-auto">
            <h3 class="m-subheader__title m-subheader__title--separator">
                实验卷积数据列表组视图
            </h3>
        </div>
    </div>
</div>

<div class="m-content" layout:fragment="content">

    <div class="alert alert-danger" role="alert" th:if="${error_msg}" th:text="${error_msg}"></div>
    <div th:if="${errorList}" th:each="arrayS:${errorList}">
        <div class="alert alert-danger" role="alert" th:text="${arrayS}"></div>
    </div>

    <div class="alert alert-success" role="alert" th:if="${success_msg}" th:text="${success_msg}"></div>
    <div class="row">
        <div class="col-md-12">
            <div class="clearfix">
                <form id="searchForm" method="post" role="form" class="form-inline" action="/scores/list">
                    <input id="currentPage" type="hidden" class="form-control" name="currentPage">
                    <input id="pageSize" type="hidden" th:value="${pageSize}" class="form-control" name="pageSize">

                    <div class="form-group m-form__group">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <button class="btn btn-success" type="button">
                                    卷积概览ID:
                                </button>
                            </div>
                            <input type="text" class="form-control m-input" name="overviewId" placeholder="overviewId"
                                   th:value="${overviewId}">
                        </div>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <button class="btn btn-success" type="button">
                                    PeptideRef:
                                </button>
                            </div>
                            <input type="text" class="form-control" name="peptideRef" placeholder="PeptideRef"
                                   th:value="${peptideRef}">
                            <div class="input-group-append">
                                <button class="btn btn-primary" type="submit">
                                    查找
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">

            <div class="m-portlet m-portlet--full-height">
                <div class="m-portlet__head">
                    <div class="m-portlet__head-caption">
                        <div class="m-portlet__head-title">
                            <h3 class="m-portlet__head-text">
                                总计有 <span th:text="${totalNum}"></span> 组打分
                            </h3>
                        </div>
                    </div>
                </div>
                <div class="m-portlet__body">
                    <!--begin::Section-->
                    <div class="m-accordion m-accordion--bordered m-accordion--solid" id="m_accordion_6" role="tablist">
                        <!--begin::Item-->

                        <div th:each="score:${scores}" class="m-accordion__item">
                            <div class="m-accordion__item-head collapsed" role="tab" id="m_accordion_7_item_1_head"
                                 data-toggle="collapse" th:href="|#${score.peptideRef}_${score.isDecoy?'decoy':''}|" aria-expanded="false">
                                <!--<span class="m-accordion__item-icon"><i class="fa flaticon-user-ok"></i></span>-->
                                <span class="m-accordion__item-title"
                                      th:text="|(${score?.featureScoresList?.size()})${score.isDecoy?'伪肽段':'肽段'}:${score?.peptideRef}[${#dates.format(score?.lastModifiedDate,'yyyy-MM-dd HH:mm:ss')}]|"></span>
                                <span class="m-accordion__item-mode"></span>
                            </div>
                            <div class="m-accordion__item-body collapse" th:id="|${score?.peptideRef}_${score.isDecoy?'decoy':''}|" role="tabpanel"
                                 aria-labelledby="m_accordion_7_item_1_head" data-parent="#m_accordion_7">
                                <div class="m-accordion__item-content">
                                    <table class="table table-bordered table-hover" style="table-layout:fixed;">
                                        <thead>
                                        <tr>
                                            <th width="5%">RT</th>
                                            <th width="5%">MainXxSwathPrelimScore</th>
                                            <th width="5%">VarBseriesScore</th>
                                            <th width="5%">VarElutionModelFitScore</th>
                                            <th width="5%">VarIntensityScore</th>
                                            <th width="5%">VarIsotopeCorrelationScore</th>
                                            <th width="5%">VarIsotopeOverlapScore</th>
                                            <th width="5%">VarLibraryCorr</th>
                                            <th width="5%">VarLibraryRsmd</th>
                                            <th width="5%">VarLogSnScore</th>
                                            <th width="5%">VarMassdevScore</th>
                                            <th width="5%">VarMassdevScoreWeighted</th>
                                            <th width="5%">VarNormRtScore</th>
                                            <th width="5%">VarXcorrCoelution</th>
                                            <th width="5%">VarXcorrCoelutionWeighted</th>
                                            <th width="5%">VarXcorrShape</th>
                                            <th width="5%">VarXcorrShapeWeighted</th>
                                            <th width="5%">VarYseriesScore</th>
                                            <th width="5%">VarLibraryDotprod</th>
                                            <th width="5%">VarLibraryManhattan</th>
                                            <th width="5%">VarLibrarySangle</th>
                                            <th width="5%">VarLibraryRootmeansquare</th>
                                            <th width="5%">VarManhattScore</th>

                                            <!--<th width="5%">操作</th>-->
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr th:each="featureScore:${score.featureScoresList}">
                                            <td th:text="${featureScore.rt}"></td>
                                            <td th:text="${featureScore.get('MainScore')}"></td>
                                            <td th:text="${featureScore.get('BseriesScore')}"></td>
                                            <td th:text="${featureScore.get('ElutionModelFitScore')}"></td>
                                            <td th:text="${featureScore.get('IntensityScore')}"></td>
                                            <td th:text="${featureScore.get('IsotopeCorrelationScore')}"></td>
                                            <td th:text="${featureScore.get('IsotopeOverlapScore')}"></td>
                                            <td th:text="${featureScore.get('LibraryCorr')}"></td>
                                            <td th:text="${featureScore.get('LibraryRsmd')}"></td>
                                            <td th:text="${featureScore.get('LogSnScore')}"></td>
                                            <td th:text="${featureScore.get('MassdevScore')}"></td>
                                            <td th:text="${featureScore.get('MassdevScoreWeighted')}"></td>
                                            <td th:text="${featureScore.get('NormRtScore')}"></td>
                                            <td th:text="${featureScore.get('XcorrCoelution')}"></td>
                                            <td th:text="${featureScore.get('XcorrCoelutionWeighted')}"></td>
                                            <td th:text="${featureScore.get('XcorrShape')}"></td>
                                            <td th:text="${featureScore.get('XcorrShapeWeighted')}"></td>
                                            <td th:text="${featureScore.get('YseriesScore')}"></td>
                                            <td th:text="${featureScore.get('LibraryDotprod')}"></td>
                                            <td th:text="${featureScore.get('LibraryManhattan')}"></td>
                                            <td th:text="${featureScore.get('LibrarySangle')}"></td>
                                            <td th:text="${featureScore.get('LibraryRootmeansquare')}"></td>
                                            <td th:text="${featureScore.get('ManhattScore')}"></td>

                                            <!--<td>-->
                                                <!--<button th:if="${entry.value} != null" type="button" class="btn btn-sm btn-info" data-toggle="modal"-->
                                                        <!--data-target="#m_modal_target"-->
                                                        <!--th:onclick="|query('${entry.value.id}','${overviewId}','${entry.value.peptideRef}','${entry.value.cutInfo}')|">-->
                                                    <!--查看谱图-->
                                                <!--</button>-->
                                            <!--</td>-->
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!--end::Item-->
                    </div>
                </div>
                <p id="pagination"></p>
            </div>

        </div>
    </div>
</div>

</body>

<th:block layout:fragment="script">
    <script th:src="|${url}/assets/js/jquery-bootpag/jquery.bootpag.js|" type="text/javascript"></script>

    <script th:inline="javascript">
        /*<![CDATA[*/
        var totalPage = [[${totalPage}]];
        var currentPage = [[${currentPage}]];
        /*]]>*/

        $(document).ready(function () {
            $('#pagination').bootpag({
                paginationClass: 'pagination',
                next: '<i class="fa fa-angle-right"></i>',
                prev: '<i class="fa fa-angle-left"></i>',
                total: totalPage,
                page: currentPage,
                maxVisible: 20
            }).on("page", function (event, num) {
                document.getElementById("currentPage").value = num;
                document.getElementById("searchForm").submit();
            });
        });
    </script>
</th:block>

<!-- end::Body -->
</html>
